<!---
This file was automatically generated by Mastro CLI
Generated on: 2025-08-12T04:30:45.404Z
Document type: api
Title: API Documentation

To prevent this file from being overwritten, add custom content
between the CUSTOM_START and CUSTOM_END markers below.
--->

# Mastro API Documentation

## Overview of the API Architecture and Design Principles

The Mastro API is designed to facilitate seamless interaction with the Mastro CLI system, which encompasses workflow orchestration, AI-powered code review, intelligent commit analysis, and documentation generation. The architecture follows a modular design, allowing for easy extension and maintenance. Key design principles include:

- **Modularity**: Each component (flow, review, split, commit, PR) is encapsulated, promoting separation of concerns.
- **Asynchronous Operations**: Many functions are designed to be asynchronous, enabling non-blocking operations for improved performance.
- **Error Handling**: Comprehensive error handling mechanisms are in place to provide meaningful feedback to users.
- **Extensibility**: The API is built to allow for future enhancements and integrations with other tools.

## Authentication and Authorization

Currently, the Mastro API does not require authentication or authorization for its operations. Future versions may introduce token-based authentication to secure sensitive operations.

## Detailed Endpoint Documentation

### 1. Workflow Orchestration (`mastro flow`)

#### Endpoint: `/api/flow`

- **Method**: `POST`
- **Description**: Initiates a complete workflow orchestration process.

**Request Example**:
```json
{
  "directory": "/path/to/project"
}
```

**Response Example**:
```json
{
  "status": "success",
  "message": "Workflow initiated successfully."
}
```

### 2. AI-Powered Code Review (`mastro review`)

#### Endpoint: `/api/review`

- **Method**: `POST`
- **Description**: Submits code for AI-powered review.

**Request Example**:
```json
{
  "code": "const x = 10;"
}
```

**Response Example**:
```json
{
  "status": "success",
  "compliments": ["Good use of const!"],
  "suggestions": ["Consider using let for variables that may change."]
}
```

### 3. Intelligent Commit Boundary Analysis (`mastro split`)

#### Endpoint: `/api/split`

- **Method**: `POST`
- **Description**: Analyzes commit boundaries based on the provided code changes.

**Request Example**:
```json
{
  "changes": [
    {"file": "src/index.js", "diff": "..." }
  ]
}
```

**Response Example**:
```json
{
  "status": "success",
  "commitBoundaries": ["src/index.js"]
}
```

### 4. Enhanced Commit Message Generation (`mastro commit`)

#### Endpoint: `/api/commit`

- **Method**: `POST`
- **Description**: Generates a commit message based on the provided changes.

**Request Example**:
```json
{
  "changes": [
    {"file": "src/index.js", "description": "Added new feature"}
  ]
}
```

**Response Example**:
```json
{
  "status": "success",
  "commitMessage": "feat: Added new feature in src/index.js"
}
```

### 5. Pull Request Creation and Management (`mastro pr`)

#### Endpoint: `/api/pr`

- **Method**: `POST`
- **Description**: Creates a pull request for the specified branch.

**Request Example**:
```json
{
  "title": "New Feature",
  "body": "This PR adds a new feature.",
  "base": "main",
  "head": "feature/new-feature"
}
```

**Response Example**:
```json
{
  "status": "success",
  "prUrl": "https://github.com/user/repo/pull/1"
}
```

## Request/Response Schemas

### Request Schema Example
```json
{
  "type": "object",
  "properties": {
    "directory": { "type": "string" },
    "code": { "type": "string" },
    "changes": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "file": { "type": "string" },
          "diff": { "type": "string" },
          "description": { "type": "string" }
        },
        "required": ["file"]
      }
    }
  },
  "required": ["directory"]
}
```

### Response Schema Example
```json
{
  "type": "object",
  "properties": {
    "status": { "type": "string" },
    "message": { "type": "string" },
    "compliments": { "type": "array", "items": { "type": "string" } },
    "suggestions": { "type": "array", "items": { "type": "string" } },
    "commitBoundaries": { "type": "array", "items": { "type": "string" } },
    "commitMessage": { "type": "string" },
    "prUrl": { "type": "string" }
  },
  "required": ["status"]
}
```

## Error Handling and Status Codes

The API uses standard HTTP status codes to indicate the success or failure of requests:

- **200 OK**: The request was successful.
- **400 Bad Request**: The request was malformed or missing required parameters.
- **500 Internal Server Error**: An unexpected error occurred on the server.

### Error Response Example
```json
{
  "status": "error",
  "message": "Invalid input provided."
}
```

## Rate Limiting and Usage Guidelines

Currently, there are no rate limits imposed on the API. However, users are encouraged to avoid excessive requests to ensure fair usage.

## SDK/Client Library Information

Mastro provides a TypeScript client library for easy integration. Install it via npm:

```bash
npm install mastro-cli
```

### Example Usage
```typescript
import { MastroClient } from 'mastro-cli';

const client = new MastroClient();

async function runWorkflow() {
  const response = await client.flow({ directory: '/path/to/project' });
  console.log(response);
}

runWorkflow();
```

## Testing and Development Guidelines

To contribute to the Mastro project, follow these guidelines:

1. **Clone the Repository**: 
   ```bash
   git clone https://github.com/user/mastro.git
   cd mastro
   ```

2. **Install Dependencies**: 
   ```bash
   npm install
   ```

3. **Run Tests**: 
   ```bash
   npm test
   ```

4. **Follow Code Standards**: Ensure your code adheres to the established coding standards and passes all tests before submitting a pull request.

## Conclusion

The Mastro API provides a robust and flexible interface for developers to integrate workflow orchestration, code review, commit analysis, and documentation generation into their projects. For further assistance, please refer to the community forums or contact the support team.

---

<!-- CUSTOM_START -->
<!-- Add your custom content here - it will be preserved during regeneration -->
<!-- CUSTOM_END -->

*Documentation generated by [Mastro CLI](https://github.com/your-org/mastro) on 8/12/2025*