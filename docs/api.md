<!---
This file was automatically generated by Mastro CLI
Generated on: 2025-08-12T04:20:29.923Z
Document type: api
Title: API Documentation

To prevent this file from being overwritten, add custom content
between the CUSTOM_START and CUSTOM_END markers below.
--->

# Mastro API Documentation

## Overview

The Mastro API is designed to facilitate seamless interaction with the Mastro CLI system, enabling developers to orchestrate workflows, perform AI-powered code reviews, analyze commit boundaries, generate enhanced commit messages, and manage pull requests. Built on TypeScript and Node.js, the API adheres to best practices in software architecture, ensuring maintainability and scalability.

### Design Principles

- **Modularity**: Each component (flow, review, split, commit, PR) is encapsulated, allowing for independent development and testing.
- **Asynchronous Operations**: Leveraging JavaScript's asynchronous capabilities to enhance performance and responsiveness.
- **Error Handling**: Comprehensive error management to ensure robustness and user-friendly feedback.
- **Extensibility**: Designed to accommodate future enhancements and integrations.

## Authentication and Authorization

Currently, the Mastro API does not require authentication or authorization. Future versions may include OAuth or API key mechanisms to secure access.

## Detailed Endpoint Documentation

### 1. Workflow Orchestration (`mastro flow`)

#### Endpoint: `/api/flow`

- **Method**: `POST`
- **Description**: Initiates a complete workflow orchestration process.

**Request Example**:
```json
{
  "workflow": "exampleWorkflow",
  "parameters": {
    "param1": "value1",
    "param2": "value2"
  }
}
```

**Response Example**:
```json
{
  "status": "success",
  "message": "Workflow initiated successfully.",
  "workflowId": "12345"
}
```

### 2. AI-Powered Code Review (`mastro review`)

#### Endpoint: `/api/review`

- **Method**: `POST`
- **Description**: Submits code for AI-powered review.

**Request Example**:
```json
{
  "code": "const x = 10;",
  "language": "javascript"
}
```

**Response Example**:
```json
{
  "status": "success",
  "compliments": ["Good use of const."],
  "suggestions": ["Consider using let for mutable variables."]
}
```

### 3. Intelligent Commit Boundary Analysis (`mastro split`)

#### Endpoint: `/api/split`

- **Method**: `POST`
- **Description**: Analyzes commit boundaries for optimal splitting.

**Request Example**:
```json
{
  "commitMessage": "Fix bug in user authentication"
}
```

**Response Example**:
```json
{
  "status": "success",
  "commitBoundaries": [
    "Fix user login issue",
    "Update authentication tests"
  ]
}
```

### 4. Enhanced Commit Message Generation (`mastro commit`)

#### Endpoint: `/api/commit`

- **Method**: `POST`
- **Description**: Generates a commit message based on provided context.

**Request Example**:
```json
{
  "context": "Refactor user service for better performance"
}
```

**Response Example**:
```json
{
  "status": "success",
  "commitMessage": "Refactor: Improve performance of user service"
}
```

### 5. Pull Request Management (`mastro pr`)

#### Endpoint: `/api/pr`

- **Method**: `POST`
- **Description**: Creates a pull request.

**Request Example**:
```json
{
  "title": "Add new feature",
  "description": "This PR adds a new feature to the application.",
  "branch": "feature/new-feature"
}
```

**Response Example**:
```json
{
  "status": "success",
  "prUrl": "https://github.com/user/repo/pull/1"
}
```

## Request/Response Schemas

### Request Schema Example

```json
{
  "type": "object",
  "properties": {
    "workflow": { "type": "string" },
    "parameters": { "type": "object" }
  },
  "required": ["workflow", "parameters"]
}
```

### Response Schema Example

```json
{
  "type": "object",
  "properties": {
    "status": { "type": "string" },
    "message": { "type": "string" },
    "workflowId": { "type": "string" }
  },
  "required": ["status", "message"]
}
```

## Error Handling and Status Codes

| Status Code | Description                          |
|-------------|--------------------------------------|
| 200         | Success                              |
| 400         | Bad Request                          |
| 401         | Unauthorized                         |
| 404         | Not Found                            |
| 500         | Internal Server Error                |

### Error Response Example

```json
{
  "status": "error",
  "message": "Invalid request parameters."
}
```

## Rate Limiting and Usage Guidelines

- **Rate Limit**: 100 requests per minute per IP address.
- **Best Practices**: Implement exponential backoff for retries and avoid unnecessary polling.

## SDK/Client Library Information

Currently, there is no official SDK for Mastro. However, developers can interact with the API using standard HTTP clients in their preferred programming languages.

### Example Code Snippet (JavaScript)

```javascript
const axios = require('axios');

async function initiateWorkflow() {
  try {
    const response = await axios.post('http://localhost:3000/api/flow', {
      workflow: 'exampleWorkflow',
      parameters: { param1: 'value1', param2: 'value2' }
    });
    console.log(response.data);
  } catch (error) {
    console.error('Error initiating workflow:', error.response.data);
  }
}
```

## Testing and Development Guidelines

1. **Environment Setup**: Ensure Node.js and TypeScript are installed.
2. **Running Tests**: Use Jest for unit testing. Run tests with `npm test`.
3. **Code Quality**: Follow ESLint and Prettier configurations for code consistency.

### Example Test Case

```typescript
import { scanRecursive } from '../lib/analyzers/doc-analyzer';

test('scanRecursive should return expected results', () => {
  const result = scanRecursive('testPath');
  expect(result).toEqual(expectedResult);
});
```

## Conclusion

The Mastro API provides a robust framework for workflow orchestration, code review, commit analysis, and pull request management. By following this documentation, developers can easily integrate and utilize the capabilities of the Mastro CLI system in their projects. For further inquiries or support, please contact the development team.

---

<!-- CUSTOM_START -->
<!-- Add your custom content here - it will be preserved during regeneration -->
<!-- CUSTOM_END -->

*Documentation generated by [Mastro CLI](https://github.com/your-org/mastro) on 8/12/2025*