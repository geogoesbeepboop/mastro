<!---
This file was automatically generated by Mastro CLI
Generated on: 2025-08-12T04:33:00.394Z
Document type: api
Title: API Documentation

To prevent this file from being overwritten, add custom content
between the CUSTOM_START and CUSTOM_END markers below.
--->

# Mastro API Documentation

## Overview of the API Architecture and Design Principles

The Mastro API is designed to facilitate seamless interaction with the Mastro CLI system, enabling developers to orchestrate workflows, conduct AI-powered code reviews, analyze commit boundaries, and manage pull requests. The architecture follows a modular design, allowing for easy extension and maintenance. Key design principles include:

- **Modularity**: Each component (flow, review, split, commit, PR) is encapsulated, promoting separation of concerns.
- **Asynchronous Operations**: Many functions are designed to be asynchronous, improving performance and responsiveness.
- **Error Handling**: Robust error handling mechanisms are implemented to ensure reliability.
- **Extensibility**: The API is built to accommodate future enhancements and integrations.

## Authentication and Authorization

Currently, the Mastro API does not require authentication or authorization. Future versions may implement token-based authentication to secure sensitive operations.

## Detailed Endpoint Documentation

### 1. Mastro Flow

#### Endpoint: `mastro flow`

- **Description**: Orchestrates the complete workflow from splitting code to analytics.
- **Method**: `POST`
- **Request Body**:
  ```json
  {
    "workflow": "string",
    "options": {
      "includeAnalytics": "boolean"
    }
  }
  ```

- **Response**:
  - **200 OK**: Workflow initiated successfully.
  - **400 Bad Request**: Invalid input parameters.

- **Example**:
  ```javascript
  const response = await fetch('/mastro/flow', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      workflow: "myWorkflow",
      options: { includeAnalytics: true }
    })
  });
  ```

### 2. Mastro Review

#### Endpoint: `mastro review`

- **Description**: Initiates an AI-powered code review.
- **Method**: `POST`
- **Request Body**:
  ```json
  {
    "code": "string",
    "options": {
      "validateCompliments": "boolean"
    }
  }
  ```

- **Response**:
  - **200 OK**: Review completed successfully.
  - **500 Internal Server Error**: Review process failed.

- **Example**:
  ```javascript
  const reviewResponse = await fetch('/mastro/review', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      code: "const a = 1;",
      options: { validateCompliments: true }
    })
  });
  ```

### 3. Mastro Split

#### Endpoint: `mastro split`

- **Description**: Analyzes commit boundaries intelligently.
- **Method**: `GET`
- **Query Parameters**:
  - `path`: Path to the codebase.

- **Response**:
  - **200 OK**: Returns commit boundary analysis.
  - **404 Not Found**: Path not found.

- **Example**:
  ```javascript
  const splitResponse = await fetch('/mastro/split?path=/path/to/codebase');
  ```

### 4. Mastro Commit

#### Endpoint: `mastro commit`

- **Description**: Generates enhanced commit messages.
- **Method**: `POST`
- **Request Body**:
  ```json
  {
    "changes": "string"
  }
  ```

- **Response**:
  - **200 OK**: Commit message generated.
  - **400 Bad Request**: Invalid changes format.

- **Example**:
  ```javascript
  const commitResponse = await fetch('/mastro/commit', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      changes: "Updated README.md"
    })
  });
  ```

### 5. Mastro PR

#### Endpoint: `mastro pr`

- **Description**: Manages pull requests.
- **Method**: `POST`
- **Request Body**:
  ```json
  {
    "title": "string",
    "description": "string",
    "branch": "string"
  }
  ```

- **Response**:
  - **201 Created**: Pull request created successfully.
  - **400 Bad Request**: Invalid input parameters.

- **Example**:
  ```javascript
  const prResponse = await fetch('/mastro/pr', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      title: "New Feature",
      description: "This PR adds a new feature.",
      branch: "feature/new-feature"
    })
  });
  ```

## Request/Response Schemas

### Request Schema Example for Mastro Review
```json
{
  "type": "object",
  "properties": {
    "code": { "type": "string" },
    "options": {
      "type": "object",
      "properties": {
        "validateCompliments": { "type": "boolean" }
      }
    }
  },
  "required": ["code"]
}
```

### Response Schema Example for Mastro Flow
```json
{
  "type": "object",
  "properties": {
    "status": { "type": "string" },
    "message": { "type": "string" }
  }
}
```

## Error Handling and Status Codes

- **400 Bad Request**: The request was invalid or cannot be served.
- **404 Not Found**: The requested resource could not be found.
- **500 Internal Server Error**: An unexpected error occurred on the server.

## Rate Limiting and Usage Guidelines

Currently, there are no rate limits imposed on the API. However, users are encouraged to implement their own throttling mechanisms to avoid overwhelming the server.

## SDK/Client Library Information

The Mastro API can be accessed directly via HTTP requests. For convenience, a TypeScript SDK is available in the `lib/sdk` directory. This SDK provides a wrapper around the API endpoints for easier integration.

### Example SDK Usage
```typescript
import { MastroSDK } from './lib/sdk';

const mastro = new MastroSDK();

async function runWorkflow() {
  const response = await mastro.flow.start({ workflow: "myWorkflow" });
  console.log(response);
}
```

## Code Examples in Multiple Languages

### JavaScript Example
```javascript
async function startFlow() {
  const response = await fetch('/mastro/flow', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ workflow: "myWorkflow" })
  });
  const data = await response.json();
  console.log(data);
}
```

### Python Example
```python
import requests

def start_flow():
    response = requests.post(
        'http://localhost:3000/mastro/flow',
        json={'workflow': 'myWorkflow'}
    )
    print(response.json())
```

## Testing and Development Guidelines

1. **Local Setup**: Clone the repository and install dependencies using `npm install`.
2. **Run Tests**: Execute tests using `npm test`.
3. **Debugging**: Use console logs and breakpoints to debug issues.
4. **Contributions**: Follow the contribution guidelines in the `CONTRIBUTING.md` file for submitting changes.

For further assistance, please refer to the [Mastro GitHub Repository](https://github.com/your-repo/mastro) or contact the development team.

---

<!-- CUSTOM_START -->
<!-- Add your custom content here - it will be preserved during regeneration -->
<!-- CUSTOM_END -->

*Documentation generated by [Mastro CLI](https://github.com/your-org/mastro) on 8/12/2025*