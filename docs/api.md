<!---
This file was automatically generated by Mastro CLI
Generated on: 2025-08-12T04:15:46.552Z
Document type: api
Title: API Documentation

To prevent this file from being overwritten, add custom content
between the CUSTOM_START and CUSTOM_END markers below.
--->

# Mastro API Documentation

## Overview of the API Architecture and Design Principles

The Mastro API is designed to facilitate seamless integration with the Mastro CLI system, enabling developers to orchestrate workflows, perform AI-powered code reviews, and manage pull requests efficiently. The architecture follows a modular design, allowing for easy extension and maintenance. Key design principles include:

- **Modularity**: Each component (flow, review, split, commit, PR) is encapsulated, promoting separation of concerns.
- **Asynchronous Operations**: Many functions are designed to be asynchronous, improving performance and responsiveness.
- **Extensibility**: The API is built to allow for future enhancements without breaking existing functionality.

## Authentication and Authorization

Currently, the Mastro API does not require authentication or authorization for basic operations. However, future versions may introduce user authentication to enhance security. Keep an eye on updates for any changes in this area.

## Detailed Endpoint Documentation

### 1. Mastro Flow

#### `POST /api/flow/start`

Starts a new workflow.

**Request:**
```json
{
  "workflowId": "string",
  "parameters": {
    "key": "value"
  }
}
```

**Response:**
```json
{
  "status": "success",
  "message": "Workflow started successfully.",
  "workflowId": "string"
}
```

### 2. Mastro Review

#### `POST /api/review/submit`

Submits code for review.

**Request:**
```json
{
  "code": "string",
  "options": {
    "validateCompliments": true
  }
}
```

**Response:**
```json
{
  "status": "success",
  "compliments": ["Great job!", "Well structured!"],
  "issues": []
}
```

### 3. Mastro Commit

#### `POST /api/commit/generate`

Generates a commit message based on the provided changes.

**Request:**
```json
{
  "changes": [
    {
      "file": "string",
      "type": "added|modified|removed"
    }
  ]
}
```

**Response:**
```json
{
  "status": "success",
  "commitMessage": "Add new feature X"
}
```

### 4. Mastro PR

#### `POST /api/pr/create`

Creates a new pull request.

**Request:**
```json
{
  "title": "string",
  "description": "string",
  "sourceBranch": "string",
  "targetBranch": "string"
}
```

**Response:**
```json
{
  "status": "success",
  "prUrl": "http://example.com/pr/1"
}
```

## Request/Response Schemas

### Request Schema Example

**Flow Start Request:**
```json
{
  "workflowId": "12345",
  "parameters": {
    "timeout": 300
  }
}
```

### Response Schema Example

**Review Submit Response:**
```json
{
  "status": "success",
  "compliments": ["Excellent code quality!"],
  "issues": ["Missing documentation for function X"]
}
```

## Error Handling and Status Codes

The API uses standard HTTP status codes to indicate the success or failure of requests:

- **200 OK**: The request was successful.
- **400 Bad Request**: The request was malformed or invalid.
- **404 Not Found**: The requested resource does not exist.
- **500 Internal Server Error**: An unexpected error occurred on the server.

### Error Response Example

```json
{
  "status": "error",
  "message": "Invalid workflowId provided."
}
```

## Rate Limiting and Usage Guidelines

Currently, there are no rate limits imposed on the Mastro API. However, it is recommended to implement exponential backoff in case of repeated failures to avoid overwhelming the server.

## SDK/Client Library Information

To facilitate integration, a TypeScript SDK is available. This SDK abstracts the API calls and provides a more user-friendly interface for developers.

### Installation

```bash
npm install mastro-sdk
```

### Usage Example

```typescript
import { Mastro } from 'mastro-sdk';

const mastro = new Mastro();

async function startWorkflow() {
  const response = await mastro.flow.start({ workflowId: '12345' });
  console.log(response);
}
```

## Code Examples in Multiple Languages

### JavaScript Example

```javascript
const axios = require('axios');

async function submitReview(code) {
  const response = await axios.post('/api/review/submit', { code });
  console.log(response.data);
}
```

### Python Example

```python
import requests

def create_pr(title, description, source_branch, target_branch):
    response = requests.post('/api/pr/create', json={
        'title': title,
        'description': description,
        'sourceBranch': source_branch,
        'targetBranch': target_branch
    })
    print(response.json())
```

## Testing and Development Guidelines

1. **Local Development**: Clone the repository and run `npm install` to set up the environment.
2. **Testing**: Use Jest for unit testing. Run tests with `npm test`.
3. **Linting**: Ensure code quality by running ESLint before committing changes.

By following these guidelines and utilizing the provided examples, developers can effectively integrate with the Mastro API and leverage its capabilities for workflow orchestration and code review.

---

<!-- CUSTOM_START -->
<!-- Add your custom content here - it will be preserved during regeneration -->
<!-- CUSTOM_END -->

*Documentation generated by [Mastro CLI](https://github.com/your-org/mastro) on 8/12/2025*