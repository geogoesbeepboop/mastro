<!---
This file was automatically generated by Mastro CLI
Generated on: 2025-08-12T04:13:22.978Z
Document type: api
Title: API Documentation

To prevent this file from being overwritten, add custom content
between the CUSTOM_START and CUSTOM_END markers below.
--->

# Mastro API Documentation

## Overview of the API Architecture and Design Principles

The Mastro API is designed to facilitate seamless interaction with the Mastro CLI system, providing a robust set of functionalities for workflow orchestration, code review, commit management, and documentation generation. The architecture follows a modular design, allowing for easy extension and maintenance. Key design principles include:

- **Modularity**: Each component (flow, review, split, commit, PR) is encapsulated, promoting separation of concerns.
- **Asynchronous Operations**: Many functions are designed to be asynchronous, improving performance and responsiveness.
- **Error Handling**: Comprehensive error handling mechanisms are in place to ensure reliability.
- **Extensibility**: The API is designed to allow for future enhancements without breaking existing functionality.

## Authentication and Authorization

Currently, the Mastro API does not require authentication or authorization for accessing its endpoints. However, future versions may introduce token-based authentication to secure sensitive operations.

## Detailed Endpoint Documentation

### 1. Mastro Flow

#### Endpoint: `/api/flow`

- **Method**: `POST`
- **Description**: Initiates a new workflow orchestration.

**Request Example**:
```json
{
  "workflow": "exampleWorkflow",
  "parameters": {
    "input": "sourceCodePath"
  }
}
```

**Response Example**:
```json
{
  "status": "success",
  "workflowId": "12345",
  "message": "Workflow initiated successfully."
}
```

### 2. Mastro Review

#### Endpoint: `/api/review`

- **Method**: `POST`
- **Description**: Submits code for AI-powered review.

**Request Example**:
```json
{
  "code": "function example() { return true; }",
  "language": "typescript"
}
```

**Response Example**:
```json
{
  "status": "success",
  "feedback": [
    "Consider using 'const' instead of 'function'.",
    "Code is well-structured."
  ]
}
```

### 3. Mastro Commit

#### Endpoint: `/api/commit`

- **Method**: `POST`
- **Description**: Generates an enhanced commit message.

**Request Example**:
```json
{
  "changes": [
    "Added new feature X",
    "Fixed bug Y"
  ]
}
```

**Response Example**:
```json
{
  "status": "success",
  "commitMessage": "feat: Add feature X and fix bug Y"
}
```

### 4. Mastro PR

#### Endpoint: `/api/pr`

- **Method**: `POST`
- **Description**: Creates a new pull request.

**Request Example**:
```json
{
  "title": "Add feature X",
  "description": "This PR adds feature X to the project.",
  "branch": "feature-x"
}
```

**Response Example**:
```json
{
  "status": "success",
  "prUrl": "https://github.com/user/repo/pull/1"
}
```

## Request/Response Schemas

### Request Schema Example for Review
```json
{
  "type": "object",
  "properties": {
    "code": {
      "type": "string"
    },
    "language": {
      "type": "string",
      "enum": ["typescript", "javascript", "python"]
    }
  },
  "required": ["code", "language"]
}
```

### Response Schema Example for Flow
```json
{
  "type": "object",
  "properties": {
    "status": {
      "type": "string"
    },
    "workflowId": {
      "type": "string"
    },
    "message": {
      "type": "string"
    }
  },
  "required": ["status", "workflowId", "message"]
}
```

## Error Handling and Status Codes

The API uses standard HTTP status codes to indicate the success or failure of requests:

- **200 OK**: Request was successful.
- **400 Bad Request**: Invalid input parameters.
- **401 Unauthorized**: Authentication required (future implementation).
- **404 Not Found**: Resource not found.
- **500 Internal Server Error**: Unexpected server error.

Error responses include a message detailing the issue:
```json
{
  "status": "error",
  "message": "Invalid input parameters."
}
```

## Rate Limiting and Usage Guidelines

Currently, there are no rate limits imposed on the API. However, users are encouraged to avoid excessive requests to ensure fair usage and performance stability.

## SDK/Client Library Information

To facilitate integration, a TypeScript client library is available. It provides a simple interface for interacting with the Mastro API.

### Installation
```bash
npm install mastro-sdk
```

### Usage Example
```typescript
import { MastroClient } from 'mastro-sdk';

const client = new MastroClient();

async function runWorkflow() {
  const response = await client.flow.start({ workflow: 'exampleWorkflow' });
  console.log(response);
}

runWorkflow();
```

## Code Examples in Multiple Languages

### JavaScript Example
```javascript
const axios = require('axios');

async function submitReview(code) {
  const response = await axios.post('/api/review', {
    code: code,
    language: 'typescript'
  });
  console.log(response.data);
}

submitReview('function example() { return true; }');
```

### Python Example
```python
import requests

def create_pr(title, description, branch):
    response = requests.post('/api/pr', json={
        'title': title,
        'description': description,
        'branch': branch
    })
    print(response.json())

create_pr('Add feature X', 'This PR adds feature X to the project.', 'feature-x')
```

## Testing and Development Guidelines

For local development and testing:

1. Clone the repository:
   ```bash
   git clone https://github.com/your-repo/mastro.git
   cd mastro
   ```

2. Install dependencies:
   ```bash
   npm install
   ```

3. Run tests:
   ```bash
   npm test
   ```

4. Use a local server for testing API endpoints:
   ```bash
   npm run dev
   ```

This documentation serves as a comprehensive guide for developers to effectively integrate and utilize the Mastro API, ensuring a smooth experience in workflow orchestration and code management.

---

<!-- CUSTOM_START -->
<!-- Add your custom content here - it will be preserved during regeneration -->
<!-- CUSTOM_END -->

*Documentation generated by [Mastro CLI](https://github.com/your-org/mastro) on 8/12/2025*